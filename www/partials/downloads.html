<div id="menu-top" class="navbar navbar-fixed-top navbar-inverse">
    <div class="navbar-inner">
        <div id="add-item" ng-click="addPart()" class="pull-right">
            <i class="icon-plus icon-white"></i>
        </div>
        <div class="container">
            <h1>Téléchargements</h1>
        </div>
    </div>
</div>

<div id="content" class="container">
    <div class="row" ng-show="view_part == 'list'">

        <select ng-model="server_filter" ng-options="server.name as server.name for server in servers"}>
            <option style="display:none" value="">Selectionnez un serveur</option>
        </select>
        <button ng-click="refreshInfos()" class="btn"><i class="icon-refresh"></i> Refresh</button>

        <!-- dl-stats -->
        <div id="dl-stats" class="span12">
            <div class="dl-stats-left">
                <p>
                    <span class="bolder">Download :</span><br/>
                    {{infos.dlspeed}} Ko/s. ({{infos.dltotal}} Go)
                </p>
            </div>
            <div class="dl-stats-right">
                <p>
                    <span class="bolder">Upload :</span><br/>
                    {{infos.ulspeed}} Ko/s. ({{infos.ultotal}} Go)
                </p>
            </div>
            <div class="clearfix"></div>
            <div class="dl-stats-files">
                <p><span class="bolder">Total :</span> {{infos.files.length}} fichier(s)</p>
            </div>
        </div>

        <!-- dl-search -->
        <div id="dl-search">
            <div class="input-prepend input-append">
                <span class="add-on add-on-left"><i class="icon-search"></i></span>
                <input id="search-input" type="text" placeholder="Rechercher..." ng-model="filter.name">
                <span class="add-on add-on-right" ng-click="filter = {}"><i class="icon-remove"></i></span>
            </div>
        </div>

        <!-- dl-list -->
        <div id="dl-list">
            <p ng-show="!infos.files.length">Empty list!</p>
            <ul>
                <li ng-repeat="file in infos.files | filter:filter" class="dl-item collapse-group"
                ng-class="{pause: file.status == 'PAUSED', error: file.status == 'ERROR'}">
                    <a data-toggle="collapse" href="#dl{{$index}}">
                        <span class="pull-left status-sign">
                            <i ng-class="{'icon-pause': file.status == 'PAUSED', 'icon-minus-sign': file.status == 'ERROR', 'icon-download-alt': file.status == 'DOWNLOAD', 'icon-upload': file.status == 'SEED', 'icon-stop': file.status == 'STOPPED'}"></i>
                        </span>
                        <h2>{{file.name}} -- {{file.progress}} %</h2>
                        <div class="progress-bar">
                            <div class="progress-inner" style="width:{{file.progress}}%;"></div>
                        </div>
                    </a>
                    <div id="dl{{$index}}" class="collapse">
                        <button class="btn" ng-click="startFile(file)"><i class="icon-play"></i> Démarrer / Reprendre</button>
                        <button class="btn" ng-click="stopFile(file)"><i class="icon-pause"></i> Pause / Arrêt</button>
                        <button class="btn" ng-click="deleteFile(file)"><i class="icon-remove"></i> Supprimer</button>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <div class="row" ng-show="view_part == 'details'">
        {{current_file}}
        <button class="btn" ng-click="fileList()">Retour à la liste</button>
    </div>

    <div class="row" ng-show="view_part == 'add'">
        <select ng-model="current_file.type">
            <option style="display:none" value="">Type de télechargement</option>
            <option value="torrent">Torrent</option>
            <option value="http">HTTP</option>
        </select>
        <input type="text" ng-model="current_file.link" placeholder="Lien du téléchargement"/>
        <button class="btn" ng-click="fileList()">Annuler</button>
        <button class="btn" ng-click="addFile()">Ajouter</button>
    </div>
</div>
